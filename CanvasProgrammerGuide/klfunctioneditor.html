<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>KL Function Editor &mdash; Fabric Engine 2.0.0 Unofficial Documentation (ja)</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Fabric Engine 2.0.0 Unofficial Documentation (ja)" href="../index.html" />
    <link rel="up" title="Canvas Programmer Guide" href="index.html" />
    <link rel="next" title="Polymorphic nodes" href="polymorphism.html" />
    <link rel="prev" title="Canvas Programmer Guide" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="polymorphism.html" title="Polymorphic nodes"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="Canvas Programmer Guide"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Canvas Programmer Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="kl-function-editor">
<span id="canvas-programmer-guide-klfunctioneditor"></span><h1>KL Function Editor<a class="headerlink" href="#kl-function-editor" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Within Canvas you can directly create custom KL function nodes. These nodes run through the same just-in-time compilation process utilizing LLVM as do graphs.</p>
<p>To create custom KL functions, right click the empty space in a graph view and choose <em class="dfn">New empty function</em>. This will create the function. To edit it, double shift-click the new node or open the context menu by right-clicking the node and choose <em class="dfn">Edit</em>. This will open the KL function editor.</p>
<img alt="../_images/userguide_19.jpg" src="../_images/userguide_19.jpg" />
<p>The KL function editor essentially contains two sections: The port list and the code window.</p>
<div class="section" id="kl-function-ports">
<h2>KL function ports<a class="headerlink" href="#kl-function-ports" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>You can add and remove ports by defining their port type, name as well as data type. By default port types are polymorphic, but you can pick fixed types. If you want to know more about KL function polymorphism, please see <a class="reference internal" href="polymorphism.html#canvas-programmer-guide-polymorphism"><span>Polymorphic nodes</span></a>. Alternatively you can also add a port by right clicking any entry in the port list and choose <em class="dfn">Add new port</em>.</p>
<p>To remove a port, right click it and choose <em class="dfn">Delete port</em> in the context menu.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The KL function editor port list also supports the Ctrl-Enter (Add new port) and Ctrl-Backspace (Delete port) keyboard shortcuts.</p>
</div>
<p>Ports can be referenced by name in the KL code below.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If you add a port with a data type which is implemented in a KL extension you have to add that extension to the <em class="dfn">Required Extensions</em> field on the top left.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Reordering of ports in the KL function editor is not yet supported, but will be added in a future version.</p>
</div>
</div>
<div class="section" id="kl-code-window">
<h2>KL code window<a class="headerlink" href="#kl-code-window" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The main entry point for the KL function node is the dfgEntry block. The Canvas compiler will replace the dfgEntry with the appropriate function declaration, containing all of the ports and features. Defining three <em class="dfn">Float32</em> ports as in image above, you can define an entry point like this:</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="nx">dfgEntry</span> <span class="p">{</span>

  <span class="nx">result</span> <span class="o">=</span> <span class="nx">cos</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Of course you can also implement operators directly within the KL function editor. So given you have two ports of type <em class="dfn">Float32[]</em>, for example, you can implement a task using PEX like this:</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="kd">operator</span> <span class="nx">task</span><span class="o">&lt;&lt;&lt;</span><span class="nx">index</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="kr">Float32</span> <span class="nx">values</span><span class="p">[],</span> <span class="k">io</span> <span class="kr">Float32</span> <span class="nx">result</span><span class="p">[])</span> <span class="p">{</span>
  <span class="nx">result</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cos</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="nx">index</span><span class="p">]);</span>
<span class="p">}</span>

<span class="nx">dfgEntry</span> <span class="p">{</span>
  <span class="nx">result</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">size</span><span class="p">());</span>
  <span class="nx">task</span><span class="o">&lt;&lt;&lt;</span><span class="nx">values</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To compile the KL function click on the <em class="dfn">Save</em> button on the top left. You can also reload the KL code for KL functions referencing an external preset file using the <em class="dfn">Reload</em> button. When leaving the KL function editor the UI will warn you in case you have unsaved changes.</p>
<p>For more information on KL&#8217;s features, please see the <a class="reference internal" href="../KLProgrammingGuide/index.html#klpg"><span>KL Programming Guide</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Even though it&#8217;s possible to define data types within a KL function node, we highly recommend to implement KL types in a KL extension instead. This makes it much easier to track changes within the type for the Canvas compiler. You can ensure that the KL function loads the extension by adding the extension to the <em class="dfn">Required extensions</em> text field on the top left of the window.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/FE_logo_211_37.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">KL Function Editor</a><ul>
<li><a class="reference internal" href="#kl-function-ports">KL function ports</a></li>
<li><a class="reference internal" href="#kl-code-window">KL code window</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="index.html"
                        title="前の章へ">Canvas Programmer Guide</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="polymorphism.html"
                        title="次の章へ">Polymorphic nodes</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/CanvasProgrammerGuide/klfunctioneditor.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="polymorphism.html" title="Polymorphic nodes"
             >次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="Canvas Programmer Guide"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Canvas Programmer Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-2015 Fabric Software Inc.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1 で生成しました。
    </div>
  </body>
</html>