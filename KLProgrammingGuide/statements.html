<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Statements &mdash; Fabric Engine 2.0.0 Unofficial Documentation (ja)</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Fabric Engine 2.0.0 Unofficial Documentation (ja)" href="../index.html" />
    <link rel="up" title="KL プログラミングガイド" href="index.html" />
    <link rel="next" title="Map-Reduce" href="map-reduce.html" />
    <link rel="prev" title="Operators and Expressions" href="ops-exprs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="map-reduce.html" title="Map-Reduce"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="ops-exprs.html" title="Operators and Expressions"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">KL プログラミングガイド</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="statements">
<span id="index-0"></span><span id="id1"></span><h1>Statements<a class="headerlink" href="#statements" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>The bodies of functions, operators, and so on are composed of <em class="dfn">statements</em>.  Statements are the parts of KL programs that actually do something.  Statements cause expressions to be evaluated, can conditionally execute other statements, or can iterate over another set of statements until a condition is met.</p>
<p>The remainder of the chapter describes the different statements that can be used inside KL function definitions.  Statements are divided into two categories: simple statements and complex statements.</p>
<div class="section" id="simple-statements">
<span id="index-1"></span><span id="id2"></span><h2>Simple Statements<a class="headerlink" href="#simple-statements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>A simple statement is a statement that does not check conditions or create a nested scope.  Simple statements always end with a <code class="docutils literal"><span class="pre">;</span></code> (semicolon) character.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">It is a common syntax error in KL and other C-like languages to forget to finish a simple statement with a semicolon.</p>
</div>
<div class="section" id="expression-statements">
<span id="expr-statements"></span><span id="index-2"></span><h3>Expression Statements<a class="headerlink" href="#expression-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Any expression, followed by a <code class="docutils literal"><span class="pre">;</span></code> (semicolon), is a statement.  The statement operates by evaluating the expression and then discarding the resulting value (if any).  The most common form of an expression statement is one that invokes a function call (eg. <code class="docutils literal"><span class="pre">report</span></code>).</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: Expression Statements</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// A very useless expression statement:</span>
  <span class="c1">// evaluates 2 + 2 then discards the</span>
  <span class="c1">// result</span>
  <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>

  <span class="c1">// A more useful expression statement:</span>
  <span class="c1">// evaluates the report function, which</span>
  <span class="c1">// causes text to appear</span>
  <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;Hello!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="parallel-execution-statement">
<span id="klpg-parallel-execution-statement"></span><span id="index-3"></span><h3>Parallel Execution Statement<a class="headerlink" href="#parallel-execution-statement" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The <em class="dfn">parallel execution statement</em>, abbreviated as <em class="dfn">PEX statement</em>, allows a KL program to invoke an operator multiple times in parallel in a generic fashion.  Each PEX statement requires an operator (see <a class="reference internal" href="globals.html#operators"><span>Operators</span></a>) to invoke as well as a number of times to invoke it, but can also take an arbitrary number of additional parameters that are passed to the operator that is called.</p>
<p>A PEX statement takes the form:</p>
<pre class="literal-block">
<em>operatorName</em>&lt;&lt;&lt;<em>countExpr</em>&gt;&gt;&gt;(<em>optionalArg1</em>, <em>optionalArg2</em>, ...);
</pre>
<p><code class="samp docutils literal"><em><span class="pre">operatorName</span></em></code> must be the name of an operator whose first parameter is of type <code class="docutils literal"><span class="pre">Index</span></code>, and <code class="samp docutils literal"><em><span class="pre">countExpr</span></em></code> must be an expression of type <code class="docutils literal"><span class="pre">Size</span></code> and is the number of calls to the operator to make.</p>
<p>The operator will be called <code class="samp docutils literal"><em><span class="pre">countExpr</span></em></code> times, potentially with overlapping parallel calls, with the first argument varying from <code class="docutils literal"><span class="pre">0</span></code> to <code class="samp docutils literal"><em><span class="pre">countExpr</span></em><span class="pre">-1</span></code>.  Any of the optional additional arguments given are passed through verbatim, and the operator must have a parameter list that is compatible (through casting) with the arguments given.  For the purpose of readability, KL supports a special syntax for operators that adds an initial parameter of type <code class="docutils literal"><span class="pre">Index</span></code>.  This syntax mirrors the parallel execution syntax:</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="c1">// The following operator definitions are equivalent:</span>

<span class="kd">operator</span> <span class="nx">foo</span><span class="o">&lt;&lt;&lt;</span><span class="nx">index</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="kr">String</span> <span class="nx">string</span><span class="p">,</span> <span class="kr">UInt32</span> <span class="nx">array</span><span class="p">[])</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>
<span class="kd">operator</span> <span class="nx">foo</span><span class="p">(</span><span class="kr">Index</span> <span class="nx">index</span><span class="p">,</span> <span class="kr">String</span> <span class="nx">string</span><span class="p">,</span> <span class="kr">UInt32</span> <span class="nx">array</span><span class="p">[])</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>
</pre></div>
</div>
<p>In a PEX statement, KL and/or Fabric Engine will try to distribute the calls as evenly as possible between the available cores on the running machine, but without foreknowledge of how long any of the calls will take.  Thus, a PEX is maximally efficient in cases where each call takes the same amount of time.</p>
<p>It is possible and even encouraged as a programming practice to make recursive PEXes.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">KL makes no effort to guard against changes to variables passed in the additional arguments from different cores at the same time.  It is the programmer&#8217;s responsibility to ensure that two invocations of the operator used in a PEX statement cannot change the same value at the same time.  Such changes can result in difficult-to-track-down bugs or even complete failure of your program.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">There is an inherent overhead in a PEX that may make it less efficient than serial calls in the case that the operator that is called is trivial.  Parallel executions best with large workloads.</p>
</div>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: PEX Operations</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">setArrayElementDesc</span><span class="o">&lt;&lt;&lt;</span><span class="nx">index</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="k">io</span> <span class="kr">String</span> <span class="nx">array</span><span class="p">[])</span> <span class="p">{</span>
  <span class="nx">array</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;index=&quot;</span> <span class="o">+</span> <span class="nx">index</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">String</span> <span class="nx">array</span><span class="p">[];</span>
  <span class="nx">array</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
  <span class="nx">setArrayElementDesc</span><span class="o">&lt;&lt;&lt;</span><span class="nx">array</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="nx">array</span><span class="p">);</span>
  <span class="nb">report</span><span class="p">(</span><span class="nx">array</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-empty-statement">
<span id="empty-statement"></span><span id="index-4"></span><h3>The Empty Statement<a class="headerlink" href="#the-empty-statement" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">;</span></code> (semicolon) alone is a statement that does nothing.  This can be used in cases where a statement is required but there is nothing to do.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The Empty Statement</span>
<span class="cm">*/</span>

<span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="k">io</span> <span class="nx">MyType</span> <span class="nx">myType</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(;</span> <span class="nx">returnsFalseWhenDone</span><span class="p">(</span><span class="nx">myType</span><span class="p">);</span> <span class="p">)</span>
    <span class="p">;</span> <span class="c1">// Do nothing</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="variable-declaration-statements">
<span id="var-decl-statements"></span><span id="index-5"></span><h3>Variable Declaration Statements<a class="headerlink" href="#variable-declaration-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A <em class="dfn">variable declaration statement</em> introduces one or more new variables into the innermost scope.  These variables remain visible for the rest of the scope and are destroyed, executing destructors when appropriate, when execution exists this scope.</p>
<p>Variable declarations require a type.  Multiple variables can be declared in the same statement by separating them with <code class="docutils literal"><span class="pre">,</span></code> (commas).</p>
<p>The variable names can be followed by array and dictionary specifications.  See <a class="reference internal" href="types.html#arrays"><span>Arrays</span></a> and <a class="reference internal" href="types.html#dictionaries"><span>Dictionaries</span></a> for more information on array and dictionary specifications.</p>
<p>Variables can be constructed or assigned to when declared to set their initial values; see <a class="reference internal" href="globals.html#klpg-constructor"><span>Constructors</span></a>.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: Variable Declaration Statements</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">Scalar</span> <span class="nx">a</span><span class="p">;</span>
  <span class="nb">report</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
  <span class="kr">Integer</span> <span class="nx">b</span><span class="p">[],</span> <span class="nx">c</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="nx">d</span><span class="p">;</span>
  <span class="nb">report</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="nb">report</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
  <span class="nb">report</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">It is not currently possible to initialize arrays in KL in the statement where the variable is declared.</p>
</div>
</div>
<div class="section" id="constant-declaration-statements">
<span id="klpg-const-decl-statements"></span><span id="index-6"></span><h3>Constant Declaration Statements<a class="headerlink" href="#constant-declaration-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A <em class="dfn">constant declaration statement</em> is similar to a <a class="reference internal" href="#var-decl-statements"><span>variable
declaration statement</span></a> but is preceded with the keyword
<cite>const</cite>.  It follows an identical syntax to global named constants; see
<a class="reference internal" href="globals.html#klpg-global-named-constants"><span>Named Constants</span></a>.</p>
</div>
<div class="section" id="the-return-statement">
<span id="return-statement"></span><span id="index-7"></span><h3>The <code class="docutils literal"><span class="pre">return</span></code> Statement<a class="headerlink" href="#the-return-statement" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">return</span></code> statement takes two forms:</p>
<ul class="simple">
<li>For a function which returns a value, the <code class="docutils literal"><span class="pre">return</span></code> statement immediately returns the given value to the calling function.  There is an implicit cast to the type of the return value as specified in the function definition.</li>
<li>For a function which does not return a value, the <code class="docutils literal"><span class="pre">return</span></code> statement does not take a value and simply returns immediately to the calling function.</li>
</ul>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The return Statement</span>
<span class="cm">*/</span>

<span class="c1">// Function that returns a value</span>
<span class="kd">function</span> <span class="kr">String</span> <span class="nx">markupName</span><span class="p">(</span><span class="kr">String</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;My name is &#39;&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Function that does not return a value</span>
<span class="kd">function</span> <span class="nx">suffixIndexDesc</span><span class="p">(</span><span class="k">io</span> <span class="kr">String</span> <span class="nx">strings</span><span class="p">[],</span> <span class="nx">Size</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">size</span><span class="p">())</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="nx">strings</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot; (was at index &quot;</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-throw-statement">
<span id="throw-statement"></span><span id="index-8"></span><h3>The <code class="docutils literal"><span class="pre">throw</span></code> Statement<a class="headerlink" href="#the-throw-statement" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">throw</span></code> statement throws an exception, which will immediately quit execution of KL code and return the exception to the calling environment (Fabric Engine or the KL tool) where it will be displayed to the user.  The throw statement takes a single &#8220;parameter&#8221;, which can be any value.  This value will be automatically converted to a string before it is passed back to the calling environment.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">It is not yet possible to catch exceptions from within KL; this is because LLVM lacks support for exception handling on 64-bit Windows.</p>
</div>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The throw Statement</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;Before throw&quot;</span><span class="p">);</span>
  <span class="k">throw</span> <span class="s2">&quot;Exception&quot;</span><span class="p">;</span>
  <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;After throw&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">** Output:</span>
<span class="cm">(stdin):9:3: warning: code is unreachable</span>

<span class="cm">Before throw</span>
<span class="cm">Error: Exception</span>
<span class="cm">KL stack trace:</span>
<span class="cm">[ST] 1 kl.internal.String.SetErrorDataPtrAndLength.AS0()</span>
<span class="cm">[ST] 2 function.setError.R.ST()</span>
<span class="cm">[ST] 3 operator.entry() (stdin):8</span>
<span class="cm">[ST] 4 kl.internal.entry.stub.cpu()</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="complex-statements">
<span id="index-9"></span><span id="id3"></span><h2>Complex Statements<a class="headerlink" href="#complex-statements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>A <em class="dfn">complex statement</em> is a statement that groups together and/or conditionally executes other statements.  Complex statements are built from simple statements, other complex statements, and expressions.</p>
<div class="section" id="compound-statements">
<span id="index-10"></span><span id="id4"></span><h3>Compound Statements<a class="headerlink" href="#compound-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>At any point when a single statement can be inserted in KL source code, it is possible to insert multiple statements surrounded by <code class="docutils literal"><span class="pre">{</span></code> (left brace) and <code class="docutils literal"><span class="pre">}</span></code> (right brace).  This has the following effects:</p>
<ul class="simple">
<li>The statements are executed, in order, as if they were together a single statement; and</li>
<li>A new, nested scope is introduced; see <a class="reference internal" href="ops-exprs.html#scope"><span>Scoping Rules</span></a>.</li>
</ul>
</div>
<div class="section" id="conditional-statements">
<span id="index-11"></span><span id="id5"></span><h3>Conditional Statements<a class="headerlink" href="#conditional-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>There are two types of conditional statement in KL: the <code class="docutils literal"><span class="pre">if</span></code> statement and the <code class="docutils literal"><span class="pre">switch</span></code> statement.</p>
<div class="section" id="the-if-statement">
<span id="if-statement"></span><span id="index-12"></span><h4>The <code class="docutils literal"><span class="pre">if</span></code> Statement<a class="headerlink" href="#the-if-statement" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">if</span></code> keyword begins a conditional statement, which can optionally include an <code class="docutils literal"><span class="pre">else</span></code> clause.  As in JavaScript and C, <code class="docutils literal"><span class="pre">if</span></code> and <code class="docutils literal"><span class="pre">else</span></code> statements can chain.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The if Statement</span>
<span class="cm">*/</span>

<span class="kd">function</span> <span class="kr">String</span> <span class="nx">desc</span><span class="p">(</span><span class="kr">Integer</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;zero&quot;</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;one&quot;</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="s2">&quot;lots&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-switch-statement">
<span id="switch-statement"></span><span id="index-13"></span><h4>The <code class="docutils literal"><span class="pre">switch</span></code> Statement<a class="headerlink" href="#the-switch-statement" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">switch...case</span></code> construct is a more compact form for a sequence of <code class="docutils literal"><span class="pre">if...else</span></code> statements, just as in JavaScript and C.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The if Statement</span>
<span class="cm">*/</span>

<span class="kd">function</span> <span class="kr">String</span> <span class="nx">descNumber</span><span class="p">(</span><span class="kr">Integer</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
      <span class="k">return</span> <span class="s2">&quot;zero&quot;</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
      <span class="k">return</span> <span class="s2">&quot;one&quot;</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
      <span class="k">return</span> <span class="s2">&quot;a few&quot;</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="s2">&quot;many&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="loop-statements">
<span id="index-14"></span><span id="id6"></span><h3>Loop Statements<a class="headerlink" href="#loop-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>KL supports four different types of loop statements: &#8220;C-style&#8221; loops, while loops, do-while loops, and dictionary loops.</p>
<div class="section" id="c-style-loops">
<span id="c-style-loop"></span><span id="index-15"></span><h4>&#8220;C-Style&#8221; Loops<a class="headerlink" href="#c-style-loops" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A <em class="dfn">C-style loop</em> takes the form:</p>
<pre class="literal-block">
for (<code class="samp docutils literal"><em><span class="pre">startStmt</span></em></code>; <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code>; <code class="samp docutils literal"><em><span class="pre">nextExpr</span></em></code>)
  <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code>
</pre>
<p>where <code class="samp docutils literal"><em><span class="pre">startStmt</span></em></code> is a statement (possibly empty), <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> and <code class="samp docutils literal"><em><span class="pre">nextExpr</span></em></code> are optional expressions, and <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> is a statement.  The loop operates as follows:</p>
<ul class="simple">
<li>A new, nested scope is created.  This scope is destroyed when the loop finishes.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">startStmt</span></em></code> statement is executed.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> expression, if present, is evaluated, and the resulting value is converted to a <code class="docutils literal"><span class="pre">Boolean</span></code>.  If the result is false, the loop finishes.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> statement is executed.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">nextExpr</span></em></code> expression, if present, is evaluated, and the resulting value is discarded.  Execution is transferred back to the step that evaluates the <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> expression.</li>
</ul>
<p>Note that since <code class="samp docutils literal"><em><span class="pre">startStmt</span></em></code> is a statement, it is possible to declare a new variable there.  This variable will go out-of-scope when the loop finishes.  It is common practice to declare loop-bound index variables in the <code class="samp docutils literal"><em><span class="pre">startStmt</span></em></code> statement.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: C-Style Loops</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">Index</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span>
    <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;i is now &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="while-loops">
<span id="index-16"></span><span id="id7"></span><h4>While Loops<a class="headerlink" href="#while-loops" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A <em class="dfn">while loop</em> takes the form:</p>
<pre class="literal-block">
while (<code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code>)
  <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code>
</pre>
<p>where <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> is a expression and <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> is a statement.  The loop operates as follows:</p>
<ul class="simple">
<li>The <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> expression is evaluated, and the resulting value is converted to a <code class="docutils literal"><span class="pre">Boolean</span></code>.  If the result is false, the loop finishes.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> statement is executed.</li>
<li>Execution is transferred back to the step that evaluates the <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> expression.</li>
</ul>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: while Loops</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">Integer</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;i is now &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
    <span class="o">++</span><span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">** Output:</span>

<span class="cm">i is now 0</span>
<span class="cm">i is now 1</span>
<span class="cm">i is now 2</span>
<span class="cm">i is now 3</span>
<span class="cm">i is now 4</span>
<span class="cm">i is now 5</span>
<span class="cm">i is now 6</span>
<span class="cm">i is now 7</span>
<span class="cm">i is now 8</span>
<span class="cm">i is now 9</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="do-while-loops">
<span id="index-17"></span><span id="id8"></span><h4>Do-While Loops<a class="headerlink" href="#do-while-loops" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A <em class="dfn">do-while loop</em> takes the form:</p>
<pre class="literal-block">
do
  <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code>
while (<code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code>);
</pre>
<p>where <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> is a expression and <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> is a statement.  The loop operates as follows:</p>
<ul class="simple">
<li>The <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> statement is executed.</li>
<li>The <code class="samp docutils literal"><em><span class="pre">checkExpr</span></em></code> expression is evaluated, and the resulting value is converted to a <code class="docutils literal"><span class="pre">Boolean</span></code>.  If the result is false, the loop finishes.</li>
<li>Execution is transferred back to the step that executes the <code class="samp docutils literal"><em><span class="pre">bodyStmt</span></em></code> statement.</li>
</ul>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: do-while Loops</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">Integer</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;i is now &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
    <span class="o">++</span><span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">** Output:</span>

<span class="cm">i is now 0</span>
<span class="cm">i is now 1</span>
<span class="cm">i is now 2</span>
<span class="cm">i is now 3</span>
<span class="cm">i is now 4</span>
<span class="cm">i is now 5</span>
<span class="cm">i is now 6</span>
<span class="cm">i is now 7</span>
<span class="cm">i is now 8</span>
<span class="cm">i is now 9</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-loops">
<span id="index-18"></span><span id="id9"></span><h4>Dictionary Loops<a class="headerlink" href="#dictionary-loops" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A dictionary loop iterates over all the keys and values, or just the values, in a dictionary.  For more information on dictionary loops, see <a class="reference internal" href="types.html#dictionaries"><span>Dictionaries</span></a>.</p>
</div>
</div>
<div class="section" id="loop-control-statements">
<span id="index-19"></span><h3>Loop Control Statements<a class="headerlink" href="#loop-control-statements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Within the body of a loop, the <code class="docutils literal"><span class="pre">break</span></code> and <code class="docutils literal"><span class="pre">continue</span></code> statements can be used to prematurely end the current iteration of the loop as described below.</p>
<div class="section" id="the-break-statement">
<span id="break-statement"></span><span id="index-20"></span><h4>The <code class="docutils literal"><span class="pre">break</span></code> Statement<a class="headerlink" href="#the-break-statement" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">break</span></code> statement immediately exits the innermost loop.  It is an error to use the <code class="docutils literal"><span class="pre">break</span></code> statement outside of a loop.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The break Statement</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Only loops 5 times</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">Integer</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;Loop &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
      <span class="k">break</span><span class="p">;</span> <span class="c1">// exit the innermost loop</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">** Output:</span>

<span class="cm">Loop 0</span>
<span class="cm">Loop 1</span>
<span class="cm">Loop 2</span>
<span class="cm">Loop 3</span>
<span class="cm">Loop 4</span>
<span class="cm">Loop 5</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="the-continue-statement">
<span id="continue-statement"></span><span id="index-21"></span><h4>The <code class="docutils literal"><span class="pre">continue</span></code> Statement<a class="headerlink" href="#the-continue-statement" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">continue</span></code> statement immediately jumps to the next iteration of the innermost loop.  It is an error to use the <code class="docutils literal"><span class="pre">continue</span></code> statement outside of a loop.</p>
<div class="highlight-kl"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** Example: The continue Statement</span>
<span class="cm">*/</span>

<span class="kd">operator</span> <span class="nx">entry</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Only prints 7</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">Integer</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">)</span>
      <span class="k">continue</span><span class="p">;</span> <span class="c1">// continue to next iteration of loop</span>
    <span class="nb">report</span><span class="p">(</span><span class="s2">&quot;Iteration &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">** Output:</span>

<span class="cm">Iteration 7</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/FE_logo_211_37.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">Statements</a><ul>
<li><a class="reference internal" href="#simple-statements">Simple Statements</a><ul>
<li><a class="reference internal" href="#expression-statements">Expression Statements</a></li>
<li><a class="reference internal" href="#parallel-execution-statement">Parallel Execution Statement</a></li>
<li><a class="reference internal" href="#the-empty-statement">The Empty Statement</a></li>
<li><a class="reference internal" href="#variable-declaration-statements">Variable Declaration Statements</a></li>
<li><a class="reference internal" href="#constant-declaration-statements">Constant Declaration Statements</a></li>
<li><a class="reference internal" href="#the-return-statement">The <code class="docutils literal"><span class="pre">return</span></code> Statement</a></li>
<li><a class="reference internal" href="#the-throw-statement">The <code class="docutils literal"><span class="pre">throw</span></code> Statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complex-statements">Complex Statements</a><ul>
<li><a class="reference internal" href="#compound-statements">Compound Statements</a></li>
<li><a class="reference internal" href="#conditional-statements">Conditional Statements</a><ul>
<li><a class="reference internal" href="#the-if-statement">The <code class="docutils literal"><span class="pre">if</span></code> Statement</a></li>
<li><a class="reference internal" href="#the-switch-statement">The <code class="docutils literal"><span class="pre">switch</span></code> Statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loop-statements">Loop Statements</a><ul>
<li><a class="reference internal" href="#c-style-loops">&#8220;C-Style&#8221; Loops</a></li>
<li><a class="reference internal" href="#while-loops">While Loops</a></li>
<li><a class="reference internal" href="#do-while-loops">Do-While Loops</a></li>
<li><a class="reference internal" href="#dictionary-loops">Dictionary Loops</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loop-control-statements">Loop Control Statements</a><ul>
<li><a class="reference internal" href="#the-break-statement">The <code class="docutils literal"><span class="pre">break</span></code> Statement</a></li>
<li><a class="reference internal" href="#the-continue-statement">The <code class="docutils literal"><span class="pre">continue</span></code> Statement</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="ops-exprs.html"
                        title="前の章へ">Operators and Expressions</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="map-reduce.html"
                        title="次の章へ">Map-Reduce</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/KLProgrammingGuide/statements.txt"
            rel="nofollow">ソースコードを表示</a></li>
    <li><a href="http://docs.fabric-engine.com/FabricEngine/2.0.0/HTML/KLProgrammingGuide/statements.html"
              rel="nofollow">原文公式ページへ移動</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="map-reduce.html" title="Map-Reduce"
             >次へ</a> |</li>
        <li class="right" >
          <a href="ops-exprs.html" title="Operators and Expressions"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >KL プログラミングガイド</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-2015 Fabric Software Inc.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1 で生成しました。
    </div>
  </body>
</html>