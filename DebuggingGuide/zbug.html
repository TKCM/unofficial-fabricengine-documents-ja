<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using zBug &mdash; Fabric Engine 2.0.0 Unofficial Documentation (ja)</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Fabric Engine 2.0.0 Unofficial Documentation (ja)" href="../index.html" />
    <link rel="up" title="Debugging Guide" href="index.html" />
    <link rel="next" title="Environment Variables" href="env-variables.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="env-variables.html" title="Environment Variables"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Debugging Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-zbug">
<span id="dg-zbug"></span><h1>Using zBug<a class="headerlink" href="#using-zbug" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="setting-up-the-environment">
<h2>Setting up the Environment<a class="headerlink" href="#setting-up-the-environment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>By default KL code is compiled with full optimization and with no debug info in order to reduce memory use as much as possible and to make the KL code run as fast as possible. However in order to debug you will need at the very least to include debug info with your KL code, and in order to take full advantage of all debugging features you will likely want to disable optimization. Fortunately both of these are automatically done for you when launching a Fabric application from zBug.</p>
<p>When a Fabric application is launched from zBug the following environment variables are automatically set:</p>
<div class="highlight-none"><div class="highlight"><pre>export FABRIC_DEBUG=2
export FABRIC_OPT_TYPE=2
</pre></div>
</div>
<p>This will enable debug info and disable optimizations. For more detailed information on what these environment variables do you can see this section: <a class="reference internal" href="env-variables.html#dg-envvars"><span>Environment Variables</span></a>.</p>
</div>
<div class="section" id="launching-an-application">
<h2>Launching an Application<a class="headerlink" href="#launching-an-application" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The current version of zBug requires launching the Fabric application within zBug in order to provide debugging capabilities. For most applications this is as simple as pre-pending zBug to the command being run:</p>
<div class="highlight-none"><div class="highlight"><pre>zBug &lt;application&gt; [&lt;arg1&gt; &lt;arg2&gt; ...]
</pre></div>
</div>
<p>For example debugging a Fabric Engine Python application could be launched like this:</p>
<div class="highlight-none"><div class="highlight"><pre>zBug python MyFabricApp.py
</pre></div>
</div>
<div class="section" id="debugging-maya">
<h3>Debugging Maya<a class="headerlink" href="#debugging-maya" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Maya under Linux can&#8217;t be launched as above however Maya provides a -d command-line option that allows it to be started within a debugger. Running Maya inside zBug is as simple as providing this option and pointing it to zBug:</p>
<div class="highlight-none"><div class="highlight"><pre>maya -d zBug
</pre></div>
</div>
</div>
<div class="section" id="attaching-to-a-running-application">
<h3>Attaching to a Running Application<a class="headerlink" href="#attaching-to-a-running-application" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>If zBug is launched without any command-line parameters it will look for a Fabric application running in debug mode (FABRIC_DEBUG=2) and automatically connect to this process if it exists. The process is located via a PID file found in the user&#8217;s Fabric application data folder.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Since in this case Fabric will start before zBug, you will need to manually set <cite>export FABRIC_DEBUG=2</cite> and <cite>export FABRIC_OPT_TYPE=2</cite> before starting the application, otherwise zBug will not see the KL debugging symbols.</p>
</div>
<p>If there is more than one Fabric application running on the system at a given time then the user can supply a -p parameter to zBug to specify the process ID of the Fabric process to connect to. In the case of Fabric running within a DCC, this process ID will normally be that of the DCC itself.</p>
<div class="highlight-none"><div class="highlight"><pre>zBug -p &lt;pid&gt;
</pre></div>
</div>
<p>Once connected with zBug debugging can occur as it would for a process launched from within zBug. Simply closing zBug will disconnect from the running process and allow execution to continue normally.</p>
<p>Depending on the version of Linux you&#8217;re using you may need to run zBug as root if you&#8217;re attaching to a process. You will see an error message like this if you try to run as a normal user:</p>
<div class="highlight-none"><div class="highlight"><pre>error: attach failed: Operation not permitted
</pre></div>
</div>
<p>This is a security measure of certain distros and not a limitation of zBug.</p>
</div>
</div>
<div class="section" id="user-interface">
<h2>User Interface<a class="headerlink" href="#user-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The zBug user interfaces tries to keep its defaults as simple as possible while leaving access to more advanced debugging features open to those who need them. The interface is written in Python and uses PySide for its UI elements. As such it is very configurable, both from a source code level as well as from within the UI itself.</p>
<p>Inside each subwindow in the UI (except for the source code window, which is fixed) there is a button at the top right corner of the subwindow that will cause it to pop out so that it can be moved around the screen. With this a user is able to configure zBug to have exactly the windows that are most important in the places that make the most sense.</p>
<div class="section" id="interrupts-and-breakpoints">
<h3>Interrupts and Breakpoints<a class="headerlink" href="#interrupts-and-breakpoints" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>When debugging an application in zBug the application may either be running or else in an interrupted or breakpoint state (we&#8217;ll refer to this as being stopped). Controls within a stopped state are the same, however most of the functionality in zBug is disabled while the application is running.</p>
<p>In order to interact with a running application a user will first have to click the Interrupt button in order to stop execution. When zBug enters an interrupted or breakpoint state the UI will update all relevant sections to indicate where the program has stopped. If there is source code available for the current position the <a class="reference internal" href="#dg-zbug-source"><span>Source Code</span></a> section will be updated to display this source code and the current line will be highlighted in yellow. The interface will update in the same way if a breakpoint is hit, and the line currently breakpointing will also be highlighted in yellow.</p>
<p>Source code will not exist for all possible execution points within a running Fabric application, since the C++ code for the closed Fabric application itself is not available to end users, and neither are code sections and function calls that live within the DCCs. The <a class="reference internal" href="#dg-zbug-source"><span>Source Code</span></a> subwindow will indicate if the source code for the given frame is available or not. However all KL code used in your application should always be available.</p>
<p>Any breakpoints in the source code currently loaded will show up as a red line in the source file. A complete list of current breakpoints across all source files is available in the <a class="reference internal" href="#dg-zbug-breakpoints"><span>Breakpoints</span></a> subwindow.</p>
</div>
<div class="section" id="ui-sections">
<h3>UI Sections<a class="headerlink" href="#ui-sections" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="breakpoints">
<span id="dg-zbug-breakpoints"></span><h4>Breakpoints<a class="headerlink" href="#breakpoints" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The breakpoints window lists all breakpoints currently set in the program. Clicking on any breakpoint found here will open up the source file and line where the breakpoint is set in the <a class="reference internal" href="#dg-zbug-source"><span>Source Code</span></a> window.</p>
<p>In the current release there is an extra internal breakpoint that always shows up in this list and can simply be ignored. It will be hidden in a future version.</p>
</div>
<div class="section" id="control-toolbar">
<h4>Control Toolbar<a class="headerlink" href="#control-toolbar" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The topmost area of zBug holds the process control toolbar and contains buttons to control execution and process flow of the application being debugged.</p>
<ul class="simple">
<li>Start: When a zBug session is opened this is the only button accessible and clicking it will launch the process being debugged.</li>
<li>Interrupt: Once the debugged application is running, clicking Interrupt at any time will stop its execution and return control to zBug. At that point you can browse any code that&#8217;s been loaded to that point, you can view where the execution has stopped by looking at the <a class="reference internal" href="#dg-zbug-stack"><span>Sources List</span></a> or <a class="reference internal" href="#dg-zbug-threads"><span>Threads</span></a> and you can set breakpoints.</li>
<li>Continue: When in a stopped state you may click Continue to tell the application to continue running.</li>
<li>Step In: When in a stopped state you may use Step In to bring execution inside the function currently being highlighted in the <a class="reference internal" href="#dg-zbug-source"><span>Source Code</span></a> subwindow. If it&#8217;s not possible for execution to go inside the function on the currently highlighted line (for example if the line is a simple variable assignment) then behavior is the same as for Step Over.</li>
<li>Step Over: When in a stopped state you may Step Over the current instruction to allow execution to continue down the current file. Step Over does not necessarily take you to the next line as there may be several instructions that need to execute on the line that&#8217;s currently selected, for example the line <code class="code docutils literal"><span class="pre">for</span> <span class="pre">(Integer</span> <span class="pre">i=0;</span> <span class="pre">i&lt;5;</span> <span class="pre">i++)</span> <span class="pre">{</span></code> contains an assignment, a comparison, and a variable increment, and each of these will be processed individually before moving on to the next line in the KL file.</li>
<li>Step Out: When in a stopped state you may Step Out of the current function into its calling function. This will bring execution to the current function&#8217;s caller as seen in the <a class="reference internal" href="#dg-zbug-stack"><span>Sources List</span></a>.</li>
</ul>
</div>
<div class="section" id="disassembly">
<h4>Disassembly<a class="headerlink" href="#disassembly" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>This window will probably not be used by most users but provides access to the assembly code for the source code visible in the currently selected frame.</p>
</div>
<div class="section" id="lldb">
<h4>LLDB<a class="headerlink" href="#lldb" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>This window gives a standard LLDB console, opening up access to any LLDB functionality that is not provided through the zBug UI. It&#8217;s not expected that users will need to enter manual LLDB commands but more advanced users may want access and it&#8217;s provided for that reason. A tutorial on basic LLDB commands is available here: <a class="reference external" href="http://lldb.llvm.org/tutorial.html">LLDB Tutorial</a>.</p>
</div>
<div class="section" id="locals">
<h4>Locals<a class="headerlink" href="#locals" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>In this section all local variables found in the scope of the current stop position will be listed, whether in C++ code or KL. Variables with some structure (for example KL <code class="code docutils literal"><span class="pre">struct</span></code> and <code class="code docutils literal"><span class="pre">object</span></code>) can be unfolded using the &#8216;+&#8217; symbol next to the variable name to inspect values at each level of the type&#8217;s hierarchy.</p>
<p>Currently for certain KL types such as <code class="code docutils literal"><span class="pre">object</span></code> or variable arrays you will see type members that don&#8217;t form part of the type that you defined in KL code. These refer to internal KL data that isn&#8217;t normally seen by users but is useful for Fabric Core team developers when working on the KL compiler. These may be hidden in a future version but for now show up in the UI and can simply be ignored.</p>
<p>Support is also missing for some KL types, specifically dictionaries, interfaces, and Map-Reduce producers. These will be added in an upcoming release.</p>
</div>
<div class="section" id="output">
<h4>Output<a class="headerlink" href="#output" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The output window displays any output that would normally be printed to the command-line in a console application.</p>
</div>
<div class="section" id="registers">
<h4>Registers<a class="headerlink" href="#registers" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Most users will not make use of this subwindow but it provides access to the CPU register values in the currently highlighted frame.</p>
</div>
<div class="section" id="source-code">
<span id="dg-zbug-source"></span><h4>Source Code<a class="headerlink" href="#source-code" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The source window is the main window of the zBug application and displays the source code (if available) for the currently selected frame in the <a class="reference internal" href="#dg-zbug-stack"><span>Sources List</span></a> window.</p>
</div>
<div class="section" id="sources-list">
<span id="dg-zbug-stack"></span><h4>Sources List<a class="headerlink" href="#sources-list" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The sources list in zBug defaults to only displaying KL code that&#8217;s been received from the debugged application. Clicking on any KL source file in this list will open up its source code into the <code class="code docutils literal"><span class="pre">DG.zbug.source</span></code> window, allowing the user to set or unset breakpoints there.</p>
</div>
<div class="section" id="stack">
<h4>Stack<a class="headerlink" href="#stack" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>This window provides a stack trace for the currently selected thread. Clicking on any function name in the stack trace will take you to the source code for that function (if available).</p>
</div>
<div class="section" id="threads">
<span id="dg-zbug-threads"></span><h4>Threads<a class="headerlink" href="#threads" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>All threads found in the current application will be listed here and clicking on any one will open up its current stack trace into the <a class="reference internal" href="#dg-zbug-stack"><span>Sources List</span></a> window.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/FE_logo_211_37.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using zBug</a><ul>
<li><a class="reference internal" href="#setting-up-the-environment">Setting up the Environment</a></li>
<li><a class="reference internal" href="#launching-an-application">Launching an Application</a><ul>
<li><a class="reference internal" href="#debugging-maya">Debugging Maya</a></li>
<li><a class="reference internal" href="#attaching-to-a-running-application">Attaching to a Running Application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#user-interface">User Interface</a><ul>
<li><a class="reference internal" href="#interrupts-and-breakpoints">Interrupts and Breakpoints</a></li>
<li><a class="reference internal" href="#ui-sections">UI Sections</a><ul>
<li><a class="reference internal" href="#breakpoints">Breakpoints</a></li>
<li><a class="reference internal" href="#control-toolbar">Control Toolbar</a></li>
<li><a class="reference internal" href="#disassembly">Disassembly</a></li>
<li><a class="reference internal" href="#lldb">LLDB</a></li>
<li><a class="reference internal" href="#locals">Locals</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#registers">Registers</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
<li><a class="reference internal" href="#sources-list">Sources List</a></li>
<li><a class="reference internal" href="#stack">Stack</a></li>
<li><a class="reference internal" href="#threads">Threads</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="introduction.html"
                        title="前の章へ">Introduction</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="env-variables.html"
                        title="次の章へ">Environment Variables</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/DebuggingGuide/zbug.txt"
            rel="nofollow">ソースコードを表示</a></li>
    <li><a href="http://docs.fabric-engine.com/FabricEngine/2.0.0/HTML/DebuggingGuide/zbug.html"
              rel="nofollow">原文公式ページへ移動</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="env-variables.html" title="Environment Variables"
             >次へ</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Fabric Engine 2.0.0 Unofficial Documentation (ja)</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Debugging Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-2015 Fabric Software Inc.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1 で生成しました。
    </div>
  </body>
</html>